{"artifactJsonType":"APPLICATION","clientSchemaVersion":2.0,"serverSchemaVersion":11.0,"exportedApplication":{"name":"Trabalho 2 - Projeto de BD2","isPublic":false,"pages":[{"id":"Page1","isDefault":true}],"publishedPages":[{"id":"Page1","isDefault":true}],"viewMode":false,"appIsExample":false,"unreadCommentThreads":0.0,"unpublishedApplicationDetail":{"appPositioning":{"type":"FIXED"},"navigationSetting":{},"themeSetting":{"sizing":1.0,"density":1.0,"appMaxWidth":"LARGE"}},"publishedApplicationDetail":{"appPositioning":{"type":"FIXED"},"navigationSetting":{},"themeSetting":{"sizing":1.0,"density":1.0,"appMaxWidth":"LARGE"}},"color":"#F5D1D1","icon":"flag","slug":"trabalho-2-projeto-de-bd2","unpublishedAppLayout":{"type":"FLUID"},"unpublishedCustomJSLibs":[],"publishedCustomJSLibs":[],"evaluationVersion":2.0,"applicationVersion":2.0,"collapseInvisibleWidgets":true,"isManualUpdate":false,"deleted":false},"datasourceList":[{"datasourceConfiguration":{"connection":{"mode":"READ_WRITE","ssl":{"authType":"DEFAULT"}},"endpoints":[{"host":"postgres_trabalho","port":5432.0}],"url":""},"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"gitSyncId":"67ad59d8069cf963890ae6bd_4002f0c2-1879-4016-8e44-3b627b0fdfd7","deleted":false}],"customJSLibList":[],"pageList":[{"unpublishedPage":{"name":"Page1","slug":"page1","layouts":[{"viewMode":false,"dsl":{"widgetName":"MainContainer","backgroundColor":"none","rightColumn":4896.0,"snapColumns":64.0,"detachFromLayout":true,"widgetId":"0","topRow":0.0,"bottomRow":810.0,"containerStyle":"none","snapRows":124.0,"parentRowSpace":1.0,"type":"CANVAS_WIDGET","canExtend":true,"version":91.0,"minHeight":1292.0,"dynamicTriggerPathList":[],"parentColumnSpace":1.0,"dynamicBindingPathList":[],"leftColumn":0.0,"children":[{"boxShadow":"{{appsmith.theme.boxShadow.appBoxShadow}}","borderColor":"#E0DEDE","onSort":"{{\n            Select_public_produto1.run();\n            Total_record_public_produto1.run()\n          }}","isVisibleDownload":false,"topRow":0.0,"isSortable":false,"onPageChange":"{{ listar_produtos_paginado.run() }}\n","type":"TABLE_WIDGET_V2","inlineEditingSaveOption":"ROW_LEVEL","animateLoading":true,"dynamicBindingPathList":[{"key":"accentColor"},{"key":"borderRadius"},{"key":"boxShadow"},{"key":"tableData"},{"key":"primaryColumns.codigo.computedValue"},{"key":"primaryColumns.valor.computedValue"},{"key":"primaryColumns.quantidade.computedValue"},{"key":"totalRecordsCount"},{"key":"primaryColumns.descricao.computedValue"},{"key":"primaryColumns.fornecedor_nome.computedValue"},{"key":"primaryColumns.customColumn1.buttonColor"},{"key":"primaryColumns.customColumn1.borderRadius"},{"key":"primaryColumns.customColumn1.boxShadow"}],"leftColumn":0.0,"delimiter":",","customIsLoadingValue":"","defaultSelectedRowIndex":"0","showInlineEditingOptionDropdown":true,"flexVerticalAlignment":"start","onAddNewRowDiscard":"{{ProdutoService.TabelaProdutosonAddNewRowDiscard();}}","accentColor":"{{appsmith.theme.colors.primaryColor}}","isVisibleFilters":false,"isVisible":true,"enableClientSideSearch":false,"version":2.0,"totalRecordsCount":"{{ contar_produtos.data[0].count }}","isLoading":false,"onSearchTextChanged":"{{\n    listar_produtos_paginado.run();\n    contar_produtos.run();\n}}","childStylesheet":{"button":{"buttonColor":"{{appsmith.theme.colors.primaryColor}}","borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","boxShadow":"none"},"menuButton":{"menuColor":"{{appsmith.theme.colors.primaryColor}}","borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","boxShadow":"none"},"iconButton":{"buttonColor":"{{appsmith.theme.colors.primaryColor}}","borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","boxShadow":"none"},"editActions":{"saveButtonColor":"{{appsmith.theme.colors.primaryColor}}","saveBorderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","discardButtonColor":"{{appsmith.theme.colors.primaryColor}}","discardBorderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}"}},"customIsLoading":false,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","columnUpdatedAt":1.739921858669E12,"primaryColumnId":"codigo","defaultSelectedRowIndices":[0.0],"needsErrorInfo":false,"mobileBottomRow":56.0,"widgetName":"TabelaProdutos","defaultPageSize":0.0,"columnOrder":["codigo","descricao","valor","quantidade","fornecedor_nome","customColumn1"],"dynamicPropertyPathList":[{"key":"tableData"},{"key":"onPageChange"},{"key":"onSearchTextChanged"},{"key":"primaryColumns.customColumn1.onClick"}],"bottomRow":40.0,"columnWidthMap":{"quantidade":70.0,"fornecedor_codigo":128.0,"valor":92.0,"codigo":64.0,"fornecedor_nome":116.0},"parentRowSpace":10.0,"onAddNewRowSave":"{{Insert_public_produto1.run(() => {\n  showAlert(\"Successfully created!\");\n  Select_public_produto1.run();\n}, () => {\n  showAlert(\"Unable to create!\");\n});\natualizar_produto.run({\n  \"codigo\": TableVendas.updatedRow.codigo,\n  \"descricao\": TableVendas.updatedRow.descricao,\n  \"valor\": TableVendas.updatedRow.valor,\n  \"quantidade\": TableVendas.updatedRow.quantidade,\n  \"fornecedor_codigo\": TableVendas.updatedRow.fornecedor_codigo\n}).then(() => {\n  listar_produtos_paginado.run().then(listar_produtos_paginado.run());\n}).catch(() => {\n  ProdutoService.TabelaProdutosonAddNewRowDiscard();\n});}}","mobileRightColumn":20.0,"parentColumnSpace":20.25,"dynamicTriggerPathList":[{"key":"onPageChange"},{"key":"onSearchTextChanged"},{"key":"onSort"},{"key":"onAddNewRowSave"},{"key":"onAddNewRowDiscard"},{"key":"primaryColumns.customColumn1.onClick"}],"borderWidth":"1","primaryColumns":{"codigo":{"allowCellWrapping":false,"allowSameOptionsInNewRow":true,"index":0.0,"width":150.0,"originalId":"codigo","id":"codigo","alias":"codigo","horizontalAlignment":"LEFT","verticalAlignment":"CENTER","columnType":"number","textSize":"0.875rem","enableFilter":true,"enableSort":true,"isVisible":true,"isDisabled":false,"isCellEditable":false,"isEditable":false,"isCellVisible":true,"isDerived":false,"label":"Código","isSaveVisible":true,"isDiscardVisible":true,"computedValue":"{{TabelaProdutos.processedTableData.map((currentRow, currentIndex) => ( currentRow[\"codigo\"]))}}","sticky":"","validation":{},"currencyCode":"USD","decimals":0.0,"thousandSeparator":true,"notation":"standard"},"valor":{"allowCellWrapping":false,"allowSameOptionsInNewRow":true,"index":2.0,"width":150.0,"originalId":"valor","id":"valor","alias":"valor","horizontalAlignment":"LEFT","verticalAlignment":"CENTER","columnType":"currency","textSize":"0.875rem","enableFilter":true,"enableSort":true,"isVisible":true,"isDisabled":false,"isCellEditable":false,"isEditable":false,"isCellVisible":true,"isDerived":false,"label":"Valor","isSaveVisible":true,"isDiscardVisible":true,"computedValue":"{{TabelaProdutos.processedTableData.map((currentRow, currentIndex) => ( currentRow[\"valor\"]))}}","sticky":"","validation":{},"currencyCode":"BRL","decimals":2.0,"thousandSeparator":true,"notation":"standard"},"quantidade":{"allowCellWrapping":false,"allowSameOptionsInNewRow":true,"index":3.0,"width":150.0,"originalId":"quantidade","id":"quantidade","alias":"quantidade","horizontalAlignment":"LEFT","verticalAlignment":"CENTER","columnType":"number","textSize":"0.875rem","enableFilter":true,"enableSort":true,"isVisible":true,"isDisabled":false,"isCellEditable":false,"isEditable":false,"isCellVisible":true,"isDerived":false,"label":"Quantidade","isSaveVisible":true,"isDiscardVisible":true,"computedValue":"{{TabelaProdutos.processedTableData.map((currentRow, currentIndex) => ( currentRow[\"quantidade\"]))}}","sticky":"","validation":{},"currencyCode":"USD","decimals":0.0,"thousandSeparator":true,"notation":"standard"},"descricao":{"allowCellWrapping":false,"allowSameOptionsInNewRow":true,"index":4.0,"width":150.0,"originalId":"descricao","id":"descricao","alias":"descricao","horizontalAlignment":"LEFT","verticalAlignment":"CENTER","columnType":"text","textColor":"","textSize":"0.875rem","fontStyle":"","enableFilter":true,"enableSort":true,"isVisible":true,"isDisabled":false,"isCellEditable":false,"isEditable":false,"isCellVisible":true,"isDerived":false,"label":"descricao","isSaveVisible":true,"isDiscardVisible":true,"computedValue":"{{TabelaProdutos.processedTableData.map((currentRow, currentIndex) => ( currentRow[\"descricao\"]))}}","sticky":"","validation":{},"currencyCode":"USD","decimals":0.0,"thousandSeparator":true,"notation":"standard","cellBackground":""},"fornecedor_nome":{"allowCellWrapping":false,"allowSameOptionsInNewRow":true,"index":5.0,"width":150.0,"originalId":"fornecedor_nome","id":"fornecedor_nome","alias":"fornecedor_nome","horizontalAlignment":"LEFT","verticalAlignment":"CENTER","columnType":"text","textColor":"","textSize":"0.875rem","fontStyle":"","enableFilter":true,"enableSort":true,"isVisible":true,"isDisabled":false,"isCellEditable":false,"isEditable":false,"isCellVisible":true,"isDerived":false,"label":"Fornecedor","isSaveVisible":true,"isDiscardVisible":true,"computedValue":"{{TabelaProdutos.processedTableData.map((currentRow, currentIndex) => ( currentRow[\"fornecedor_nome\"]))}}","sticky":"","validation":{},"currencyCode":"USD","decimals":0.0,"thousandSeparator":true,"notation":"standard","cellBackground":""},"customColumn1":{"allowCellWrapping":false,"allowSameOptionsInNewRow":true,"index":6.0,"width":150.0,"originalId":"customColumn1","id":"customColumn1","alias":"Editar","horizontalAlignment":"LEFT","verticalAlignment":"CENTER","columnType":"button","textSize":"0.875rem","enableFilter":true,"enableSort":true,"isVisible":true,"isDisabled":false,"isCellEditable":false,"isEditable":false,"isCellVisible":true,"isDerived":true,"label":"Editar","isSaveVisible":true,"isDiscardVisible":true,"computedValue":"","sticky":"","validation":{},"currencyCode":"USD","decimals":0.0,"thousandSeparator":true,"notation":"standard","buttonStyle":"rgb(3, 179, 101)","labelColor":"#FFFFFF","buttonColor":"{{TabelaProdutos.processedTableData.map((currentRow, currentIndex) => ( (appsmith.theme.colors.primaryColor)))}}","borderRadius":"{{TabelaProdutos.processedTableData.map((currentRow, currentIndex) => ( (appsmith.theme.borderRadius.appBorderRadius)))}}","boxShadow":"{{TabelaProdutos.processedTableData.map((currentRow, currentIndex) => ( \"none\"))}}","customAlias":"","buttonLabel":"Editar","onClick":"{{\n    console.log(\"\uD83D\uDFE2 Clicou em Editar para o produto:\", this);\n\n    if (!this || Object.keys(this).length === 0 || !this.codigo) {\n        showAlert(\"Erro ao carregar o produto para edição! Código do produto ausente.\", \"error\");\n        return;\n    }\n\n    storeValue(\"selectedRow\", this);\n    console.log(\"✏️ Produto selecionado para edição:\", appsmith.store.selectedRow);\n\n    FormProduto.setVisibility(true);\n\n    // Preenche os campos do formulário com os valores do produto selecionado\n    InputProdutoDescricao.setValue(appsmith.store.selectedRow.descricao || \"\");\n    InputProdutoValor.setValue(appsmith.store.selectedRow.valor || 0);\n    InputProdutoQuantidade.setValue(appsmith.store.selectedRow.quantidade || 0);\n\n    // \uD83D\uDD39 Agora o fornecedor correto será carregado no dropdown\n    SelectProdutoFornecedor.setSelectedOption(\n        appsmith.store.selectedRow.fornecedor_codigo ? appsmith.store.selectedRow.fornecedor_codigo.toString() : \"\"\n    );\n}}\n"}},"onRowSelected":"{{}}","defaultSearchText":"","key":"w18h9uhr55","canFreezeColumn":true,"rightColumn":31.0,"textSize":"0.875rem","widgetId":"ae123vkrf4","allowAddNewRow":false,"minWidth":450.0,"tableData":"{{ listar_produtos_paginado.data }}\n\n\n","label":"Data","searchKey":"","parentId":"0","serverSidePaginationEnabled":true,"renderMode":"CANVAS","mobileTopRow":28.0,"horizontalAlignment":"LEFT","isVisibleSearch":true,"responsiveBehavior":"fill","mobileLeftColumn":0.0,"isVisiblePagination":true,"verticalAlignment":"CENTER"},{"needsErrorInfo":false,"boxShadow":"{{appsmith.theme.boxShadow.appBoxShadow}}","mobileBottomRow":76.0,"borderColor":"#E0DEDE","widgetName":"FormProduto","isCanvas":true,"dynamicPropertyPathList":[],"topRow":41.0,"bottomRow":80.0,"parentRowSpace":10.0,"type":"FORM_WIDGET","shouldScrollContents":true,"mobileRightColumn":29.0,"animateLoading":true,"parentColumnSpace":20.25,"dynamicTriggerPathList":[],"leftColumn":0.0,"dynamicBindingPathList":[{"key":"borderRadius"},{"key":"boxShadow"}],"children":[{"needsErrorInfo":false,"boxShadow":"{{appsmith.theme.boxShadow.appBoxShadow}}","mobileBottomRow":400.0,"widgetName":"Canvas1","topRow":0.0,"bottomRow":390.0,"parentRowSpace":1.0,"type":"CANVAS_WIDGET","canExtend":false,"minHeight":400.0,"mobileRightColumn":486.0,"parentColumnSpace":1.0,"leftColumn":0.0,"dynamicBindingPathList":[{"key":"borderRadius"},{"key":"boxShadow"}],"children":[{"needsErrorInfo":false,"mobileBottomRow":5.0,"widgetName":"Text1Copy","topRow":1.0,"bottomRow":5.0,"type":"TEXT_WIDGET","mobileRightColumn":25.5,"animateLoading":true,"overflow":"NONE","fontFamily":"{{appsmith.theme.fontFamily.appFont}}","dynamicTriggerPathList":[],"leftColumn":1.0,"dynamicBindingPathList":[{"key":"truncateButtonColor"},{"key":"fontFamily"},{"key":"borderRadius"}],"shouldTruncate":false,"truncateButtonColor":"{{appsmith.theme.colors.primaryColor}}","text":"Editar","key":"rlyo043ob5","rightColumn":25.0,"textAlign":"LEFT","dynamicHeight":"AUTO_HEIGHT","widgetId":"wrdj9ko92l","minWidth":450.0,"isVisible":true,"fontStyle":"BOLD","textColor":"#231F20","version":1.0,"parentId":"smwtatmdou","renderMode":"CANVAS","isLoading":false,"mobileTopRow":1.0,"responsiveBehavior":"fill","originalTopRow":1.0,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":1.5,"maxDynamicHeight":9000.0,"originalBottomRow":5.0,"fontSize":"1.25rem","minDynamicHeight":4.0},{"resetFormOnClick":true,"needsErrorInfo":false,"boxShadow":"none","mobileBottomRow":37.0,"widgetName":"BtnSalvarProduto","onClick":"{{ validarESalvarProduto.salvarProduto() }}\n\n\n","buttonColor":"{{appsmith.theme.colors.primaryColor}}","dynamicPropertyPathList":[{"key":"onClick"}],"topRow":33.0,"bottomRow":37.0,"type":"BUTTON_WIDGET","mobileRightColumn":62.0,"animateLoading":true,"dynamicTriggerPathList":[{"key":"onClick"}],"leftColumn":46.0,"dynamicBindingPathList":[{"key":"buttonColor"},{"key":"borderRadius"}],"text":"Salvar","isDisabled":false,"key":"xpvdeqte6r","rightColumn":62.0,"isDefaultClickDisabled":true,"widgetId":"bcu11dbhwy","minWidth":120.0,"isVisible":true,"recaptchaType":"V3","version":1.0,"parentId":"smwtatmdou","renderMode":"CANVAS","isLoading":false,"mobileTopRow":33.0,"responsiveBehavior":"hug","disabledWhenInvalid":true,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":46.0,"buttonVariant":"PRIMARY","placement":"CENTER"},{"resetFormOnClick":true,"needsErrorInfo":false,"boxShadow":"none","mobileBottomRow":37.0,"widgetName":"BtnCancelarEdicao","onClick":"{{\n    storeValue(\"selectedRow\", null);\n    InputProdutoDescricao.setValue(\"\"); \n    InputProdutoValor.setValue(\"\");\n    InputProdutoQuantidade.setValue(\"\");\n    SelectProdutoFornecedor.setSelectedOption(\"\");\n\n    showAlert(\"Seleção cancelada e formulário limpo!\", \"info\");\n}}\n","buttonColor":"{{appsmith.theme.colors.primaryColor}}","dynamicPropertyPathList":[{"key":"onClick"}],"topRow":33.0,"bottomRow":37.0,"type":"BUTTON_WIDGET","mobileRightColumn":46.0,"animateLoading":true,"dynamicTriggerPathList":[{"key":"onClick"}],"leftColumn":30.0,"dynamicBindingPathList":[{"key":"buttonColor"},{"key":"borderRadius"}],"text":"Cancelar","isDisabled":false,"key":"xpvdeqte6r","rightColumn":46.0,"isDefaultClickDisabled":true,"widgetId":"zus1pr8nzf","minWidth":120.0,"isVisible":true,"recaptchaType":"V3","version":1.0,"parentId":"smwtatmdou","renderMode":"CANVAS","isLoading":false,"mobileTopRow":33.0,"responsiveBehavior":"hug","disabledWhenInvalid":false,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":30.0,"buttonVariant":"SECONDARY","placement":"CENTER"},{"needsErrorInfo":false,"boxShadow":"none","mobileBottomRow":22.0,"widgetName":"InputProdutoDescricao","topRow":6.0,"bottomRow":13.0,"parentRowSpace":10.0,"labelWidth":5.0,"autoFocus":false,"type":"INPUT_WIDGET_V2","mobileRightColumn":24.0,"animateLoading":true,"parentColumnSpace":7.28125,"dynamicTriggerPathList":[],"resetOnSubmit":true,"leftColumn":2.0,"dynamicBindingPathList":[{"key":"accentColor"},{"key":"borderRadius"},{"key":"defaultText"}],"labelPosition":"Top","labelStyle":"","inputType":"TEXT","isDisabled":false,"key":"57wyusjz46","labelTextSize":"0.875rem","isRequired":false,"rightColumn":22.0,"dynamicHeight":"FIXED","widgetId":"7rmq8w9n4h","accentColor":"{{appsmith.theme.colors.primaryColor}}","showStepArrows":false,"minWidth":450.0,"isVisible":true,"label":"Descrição do Produto","version":2.0,"parentId":"smwtatmdou","labelAlignment":"left","renderMode":"CANVAS","isLoading":false,"mobileTopRow":15.0,"responsiveBehavior":"fill","originalTopRow":6.0,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":4.0,"maxDynamicHeight":9000.0,"originalBottomRow":13.0,"iconAlign":"left","defaultText":"{{ TabelaProdutos.selectedRow.descricao }}\n","minDynamicHeight":4.0},{"needsErrorInfo":false,"boxShadow":"none","mobileBottomRow":17.0,"widgetName":"InputProdutoValor","topRow":8.0,"bottomRow":15.0,"defaultCurrencyCode":"BRL","parentRowSpace":10.0,"labelWidth":5.0,"autoFocus":false,"type":"CURRENCY_INPUT_WIDGET","mobileRightColumn":55.0,"animateLoading":true,"parentColumnSpace":7.28125,"dynamicTriggerPathList":[],"resetOnSubmit":true,"leftColumn":35.0,"dynamicBindingPathList":[{"key":"accentColor"},{"key":"borderRadius"},{"key":"defaultText"}],"labelPosition":"Top","labelStyle":"","isDisabled":false,"key":"zpq14qo6of","labelTextSize":"0.875rem","isRequired":false,"rightColumn":55.0,"dynamicHeight":"FIXED","widgetId":"hjcuqpfjtq","accentColor":"{{appsmith.theme.colors.primaryColor}}","showStepArrows":false,"minWidth":450.0,"isVisible":true,"label":"Valor (R$)","allowCurrencyChange":false,"version":1.0,"parentId":"smwtatmdou","labelAlignment":"left","renderMode":"CANVAS","isLoading":false,"mobileTopRow":10.0,"responsiveBehavior":"fill","borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":35.0,"maxDynamicHeight":9000.0,"decimals":2.0,"iconAlign":"left","defaultText":"{{ TabelaProdutos.selectedRow.valor }}\n","minDynamicHeight":4.0},{"boxShadow":"none","topRow":23.0,"labelWidth":5.0,"type":"INPUT_WIDGET_V2","animateLoading":true,"resetOnSubmit":true,"leftColumn":4.0,"dynamicBindingPathList":[{"key":"accentColor"},{"key":"borderRadius"},{"key":"defaultText"}],"labelStyle":"","inputType":"NUMBER","isDisabled":false,"isRequired":false,"dynamicHeight":"FIXED","accentColor":"{{appsmith.theme.colors.primaryColor}}","showStepArrows":false,"isVisible":true,"version":2.0,"isLoading":false,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","originalBottomRow":30.0,"needsErrorInfo":false,"mobileBottomRow":31.0,"widgetName":"InputProdutoQuantidade","bottomRow":30.0,"parentRowSpace":10.0,"autoFocus":false,"mobileRightColumn":22.0,"parentColumnSpace":7.28125,"dynamicTriggerPathList":[],"labelPosition":"Top","key":"57wyusjz46","labelTextSize":"0.875rem","rightColumn":22.0,"widgetId":"n8tzvbpnkk","minWidth":450.0,"label":"Quantidade","parentId":"smwtatmdou","labelAlignment":"left","renderMode":"CANVAS","mobileTopRow":24.0,"responsiveBehavior":"fill","originalTopRow":23.0,"mobileLeftColumn":2.0,"maxDynamicHeight":9000.0,"shouldAllowAutofill":false,"iconAlign":"left","defaultText":"{{ TabelaProdutos.selectedRow.quantidade }}\n","minDynamicHeight":4.0},{"needsErrorInfo":false,"boxShadow":"none","mobileBottomRow":28.0,"widgetName":"SelectProdutoFornecedor","isFilterable":true,"dynamicPropertyPathList":[{"key":"sourceData"}],"labelText":"Fornecedor","topRow":22.0,"bottomRow":29.0,"parentRowSpace":10.0,"labelWidth":5.0,"type":"SELECT_WIDGET","serverSideFiltering":false,"mobileRightColumn":56.0,"defaultOptionValue":"{{ ((options, serverSideFiltering) => (  listar_fornecedores.data.find(f => f.codigo == appsmith.store.selectedRow?.fornecedor_codigo)?.codigo ?? \"\" ))(SelectProdutoFornecedor.options, SelectProdutoFornecedor.serverSideFiltering) }}","animateLoading":true,"parentColumnSpace":7.28125,"dynamicTriggerPathList":[],"leftColumn":35.0,"dynamicBindingPathList":[{"key":"accentColor"},{"key":"borderRadius"},{"key":"sourceData"},{"key":"defaultOptionValue"}],"labelPosition":"Top","placeholderText":"Select option","isDisabled":false,"sourceData":"{{ listar_todos_fornecedores.data.map(row => { return { label: row.descricao, value: row.codigo } }) }}\n\n","key":"7lourx3miz","labelTextSize":"0.875rem","isRequired":false,"rightColumn":62.0,"dynamicHeight":"FIXED","widgetId":"wacdsg1ymf","accentColor":"{{appsmith.theme.colors.primaryColor}}","optionValue":"value","minWidth":450.0,"isVisible":true,"version":1.0,"parentId":"smwtatmdou","labelAlignment":"left","renderMode":"CANVAS","isLoading":false,"mobileTopRow":21.0,"optionLabel":"label","responsiveBehavior":"fill","borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":36.0,"maxDynamicHeight":9000.0,"minDynamicHeight":4.0},{"resetFormOnClick":false,"needsErrorInfo":false,"boxShadow":"none","mobileBottomRow":35.0,"widgetName":"BtnApagarProduto","onClick":"{{\n    TabelaProdutos.selectedRow \n        ? deletar_produto.run({ codigo: TabelaProdutos.selectedRow.codigo })\n            .then(() => {\n                showAlert(\"Produto apagado com sucesso!\", \"success\");\n                listar_produtos_paginado.run(); // Atualiza a tabela\n            })\n            .catch(error => {\n                showAlert(\"Erro ao apagar produto!\", \"error\");\n                console.error(\"Erro ao apagar produto:\", error);\n            })\n        : showAlert(\"Selecione um produto antes de apagar!\", \"warning\");\n}}\n","buttonColor":"#ef4444","dynamicPropertyPathList":[{"key":"onClick"}],"topRow":33.0,"bottomRow":37.0,"parentRowSpace":10.0,"type":"BUTTON_WIDGET","mobileRightColumn":16.0,"animateLoading":true,"parentColumnSpace":7.28125,"dynamicTriggerPathList":[{"key":"onClick"}],"leftColumn":0.0,"dynamicBindingPathList":[{"key":"borderRadius"}],"text":"Apagar","isDisabled":false,"key":"p06buktc8n","rightColumn":16.0,"isDefaultClickDisabled":true,"widgetId":"tld51wwu3x","minWidth":120.0,"isVisible":true,"recaptchaType":"V3","version":1.0,"parentId":"smwtatmdou","renderMode":"CANVAS","isLoading":false,"mobileTopRow":31.0,"responsiveBehavior":"hug","originalTopRow":33.0,"disabledWhenInvalid":false,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":0.0,"originalBottomRow":37.0,"buttonVariant":"PRIMARY","placement":"CENTER"},{"needsErrorInfo":false,"boxShadow":"none","mobileBottomRow":8.0,"widgetName":"InputQuantidadeVenda","topRow":1.0,"bottomRow":8.0,"parentRowSpace":10.0,"labelWidth":5.0,"autoFocus":false,"type":"INPUT_WIDGET_V2","mobileRightColumn":52.0,"animateLoading":true,"parentColumnSpace":7.28125,"resetOnSubmit":true,"leftColumn":32.0,"dynamicBindingPathList":[{"key":"accentColor"},{"key":"borderRadius"}],"labelPosition":"Top","labelStyle":"","inputType":"TEXT","isDisabled":false,"key":"x5xbag4nm1","labelTextSize":"0.875rem","isRequired":false,"rightColumn":52.0,"dynamicHeight":"FIXED","widgetId":"l5t2dldco2","accentColor":"{{appsmith.theme.colors.primaryColor}}","showStepArrows":false,"minWidth":450.0,"isVisible":true,"label":"Label","version":2.0,"parentId":"smwtatmdou","labelAlignment":"left","renderMode":"CANVAS","isLoading":false,"mobileTopRow":1.0,"responsiveBehavior":"fill","borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":32.0,"maxDynamicHeight":9000.0,"iconAlign":"left","defaultText":"","minDynamicHeight":4.0}],"key":"yggai7bqja","rightColumn":486.0,"detachFromLayout":true,"dynamicHeight":"AUTO_HEIGHT","widgetId":"smwtatmdou","containerStyle":"none","minWidth":450.0,"isVisible":true,"version":1.0,"parentId":"6hbv01y7ml","renderMode":"CANVAS","isLoading":false,"mobileTopRow":0.0,"responsiveBehavior":"fill","borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":0.0,"maxDynamicHeight":9000.0,"minDynamicHeight":4.0,"flexLayers":[]}],"borderWidth":"1","positioning":"fixed","flexVerticalAlignment":"stretch","key":"kasvnj7bny","backgroundColor":"#FFFFFF","rightColumn":24.0,"dynamicHeight":"AUTO_HEIGHT","widgetId":"6hbv01y7ml","minWidth":450.0,"isVisible":true,"parentId":"0","renderMode":"CANVAS","isLoading":false,"mobileTopRow":36.0,"responsiveBehavior":"fill","originalTopRow":41.0,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":5.0,"maxDynamicHeight":9000.0,"originalBottomRow":80.0,"minDynamicHeight":10.0},{"resetFormOnClick":false,"needsErrorInfo":false,"boxShadow":"none","mobileBottomRow":43.0,"widgetName":"BtnAdicionarProduto","onClick":"{{ validarESalvarProduto.adicionarNovoProduto() }}\n","buttonColor":"{{appsmith.theme.colors.primaryColor}}","dynamicPropertyPathList":[{"key":"onClick"}],"topRow":2.0,"bottomRow":6.0,"parentRowSpace":10.0,"type":"BUTTON_WIDGET","mobileRightColumn":16.0,"animateLoading":true,"parentColumnSpace":20.25,"dynamicTriggerPathList":[{"key":"onClick"}],"leftColumn":45.0,"dynamicBindingPathList":[{"key":"buttonColor"},{"key":"borderRadius"}],"text":"Adicionar Produto","isDisabled":false,"key":"vf3we1p8g7","rightColumn":60.0,"isDefaultClickDisabled":true,"widgetId":"gn55kn4vnh","minWidth":120.0,"isVisible":true,"recaptchaType":"V3","version":1.0,"parentId":"0","renderMode":"CANVAS","isLoading":false,"mobileTopRow":39.0,"responsiveBehavior":"hug","disabledWhenInvalid":false,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":0.0,"buttonVariant":"PRIMARY","placement":"CENTER"},{"needsErrorInfo":false,"boxShadow":"{{appsmith.theme.boxShadow.appBoxShadow}}","mobileBottomRow":85.0,"borderColor":"#E0DEDE","widgetName":"FormVenda","isCanvas":true,"topRow":41.0,"bottomRow":81.0,"parentRowSpace":10.0,"type":"FORM_WIDGET","shouldScrollContents":true,"mobileRightColumn":51.0,"animateLoading":true,"parentColumnSpace":20.25,"leftColumn":24.0,"dynamicBindingPathList":[{"key":"borderRadius"},{"key":"boxShadow"}],"children":[{"needsErrorInfo":false,"boxShadow":"{{appsmith.theme.boxShadow.appBoxShadow}}","mobileBottomRow":400.0,"widgetName":"Canvas2","topRow":0.0,"bottomRow":400.0,"parentRowSpace":1.0,"type":"CANVAS_WIDGET","canExtend":false,"minHeight":400.0,"mobileRightColumn":486.0,"parentColumnSpace":1.0,"leftColumn":0.0,"dynamicBindingPathList":[{"key":"borderRadius"},{"key":"boxShadow"}],"children":[{"needsErrorInfo":false,"mobileBottomRow":5.0,"widgetName":"Text1","topRow":1.0,"bottomRow":5.0,"type":"TEXT_WIDGET","mobileRightColumn":25.5,"animateLoading":true,"overflow":"NONE","fontFamily":"{{appsmith.theme.fontFamily.appFont}}","dynamicTriggerPathList":[],"leftColumn":1.5,"dynamicBindingPathList":[{"key":"truncateButtonColor"},{"key":"fontFamily"},{"key":"borderRadius"}],"shouldTruncate":false,"truncateButtonColor":"{{appsmith.theme.colors.primaryColor}}","text":"Venda","key":"rlyo043ob5","rightColumn":25.5,"textAlign":"LEFT","dynamicHeight":"AUTO_HEIGHT","widgetId":"jtg9tzeoth","minWidth":450.0,"isVisible":true,"fontStyle":"BOLD","textColor":"#231F20","version":1.0,"parentId":"1a3q9z3wyr","renderMode":"CANVAS","isLoading":false,"mobileTopRow":1.0,"responsiveBehavior":"fill","originalTopRow":1.0,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":1.5,"maxDynamicHeight":9000.0,"originalBottomRow":5.0,"fontSize":"1.25rem","minDynamicHeight":4.0},{"resetFormOnClick":true,"needsErrorInfo":false,"boxShadow":"none","mobileBottomRow":37.0,"widgetName":"BtnRegistrarVenda","onClick":"{{\n    registrar_venda.run({ \n        produto_codigo: TabelaProdutos.selectedRow?.codigo, \n        quantidade: InputQuantidadeVenda.text ? parseInt(InputQuantidadeVenda.text, 10) : 1\n    }).then(() => {\n        atualizar_estoque.run({ \n            produto_codigo: TabelaProdutos.selectedRow?.codigo, \n            quantidade: InputQuantidadeVenda.text ? parseInt(InputQuantidadeVenda.text, 10) : 1\n        });\n        showAlert(\"Venda registrada com sucesso!\", \"success\");\n        listar_produtos_paginado.run(); // Atualiza a tabela de produtos\n        listar_vendas.run(); // Atualiza a tabela de vendas\n    }).catch(error => {\n        showAlert(\"Erro ao registrar venda!\", \"error\");\n        console.error(\"Erro ao registrar venda:\", error);\n    });\n}}\n","buttonColor":"{{appsmith.theme.colors.primaryColor}}","dynamicPropertyPathList":[{"key":"onClick"}],"topRow":34.0,"bottomRow":38.0,"type":"BUTTON_WIDGET","mobileRightColumn":62.0,"animateLoading":true,"dynamicTriggerPathList":[{"key":"onClick"}],"leftColumn":38.0,"dynamicBindingPathList":[{"key":"buttonColor"},{"key":"borderRadius"}],"text":"Registrar venda","isDisabled":false,"key":"v7cb7qmdn3","rightColumn":64.0,"isDefaultClickDisabled":true,"widgetId":"7ctr45954d","minWidth":120.0,"isVisible":true,"recaptchaType":"V3","version":1.0,"parentId":"1a3q9z3wyr","renderMode":"CANVAS","isLoading":false,"mobileTopRow":33.0,"responsiveBehavior":"hug","originalTopRow":33.0,"disabledWhenInvalid":true,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":46.0,"originalBottomRow":37.0,"buttonVariant":"PRIMARY","placement":"CENTER"},{"resetFormOnClick":true,"needsErrorInfo":false,"boxShadow":"none","mobileBottomRow":37.0,"widgetName":"BtnCancelarSelecao","buttonColor":"{{appsmith.theme.colors.primaryColor}}","topRow":34.0,"bottomRow":38.0,"type":"BUTTON_WIDGET","mobileRightColumn":46.0,"animateLoading":true,"dynamicTriggerPathList":[],"leftColumn":21.0,"dynamicBindingPathList":[{"key":"buttonColor"},{"key":"borderRadius"}],"text":"Cancelar","isDisabled":false,"key":"v7cb7qmdn3","rightColumn":37.0,"isDefaultClickDisabled":true,"widgetId":"p5h48kqsxt","minWidth":120.0,"isVisible":true,"recaptchaType":"V3","version":1.0,"parentId":"1a3q9z3wyr","renderMode":"CANVAS","isLoading":false,"mobileTopRow":33.0,"responsiveBehavior":"hug","originalTopRow":34.0,"disabledWhenInvalid":false,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":30.0,"originalBottomRow":38.0,"buttonVariant":"SECONDARY","placement":"CENTER"},{"needsErrorInfo":false,"boxShadow":"none","mobileBottomRow":18.0,"widgetName":"SelectProduto","isFilterable":true,"labelText":"Label","topRow":11.0,"bottomRow":18.0,"parentRowSpace":10.0,"labelWidth":5.0,"type":"MULTI_SELECT_WIDGET_V2","serverSideFiltering":false,"mobileRightColumn":28.0,"defaultOptionValue":["GREEN","RED"],"animateLoading":true,"parentColumnSpace":7.28125,"leftColumn":8.0,"dynamicBindingPathList":[{"key":"accentColor"},{"key":"borderRadius"}],"labelPosition":"Top","placeholderText":"Select option(s)","isDisabled":false,"sourceData":[{"name":"Blue","code":"BLUE"},{"name":"Green","code":"GREEN"},{"name":"Red","code":"RED"}],"key":"sliqhqo1m5","labelTextSize":"0.875rem","isRequired":false,"rightColumn":28.0,"dynamicHeight":"FIXED","widgetId":"9vo5iay31r","accentColor":"{{appsmith.theme.colors.primaryColor}}","optionValue":"code","minWidth":450.0,"isVisible":true,"version":1.0,"parentId":"1a3q9z3wyr","labelAlignment":"left","renderMode":"CANVAS","isLoading":false,"mobileTopRow":11.0,"optionLabel":"name","responsiveBehavior":"fill","originalTopRow":11.0,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":8.0,"maxDynamicHeight":9000.0,"originalBottomRow":18.0,"minDynamicHeight":4.0},{"needsErrorInfo":false,"boxShadow":"none","mobileBottomRow":17.0,"widgetName":"Input1","topRow":10.0,"bottomRow":17.0,"parentRowSpace":10.0,"labelWidth":5.0,"autoFocus":false,"type":"INPUT_WIDGET_V2","mobileRightColumn":58.0,"animateLoading":true,"parentColumnSpace":7.28125,"resetOnSubmit":true,"leftColumn":38.0,"dynamicBindingPathList":[{"key":"accentColor"},{"key":"borderRadius"}],"labelPosition":"Top","labelStyle":"","inputType":"TEXT","isDisabled":false,"key":"9e2qi2vbg4","labelTextSize":"0.875rem","isRequired":false,"rightColumn":58.0,"dynamicHeight":"FIXED","widgetId":"5v5rn1mlzj","accentColor":"{{appsmith.theme.colors.primaryColor}}","showStepArrows":false,"minWidth":450.0,"isVisible":true,"label":"Label","version":2.0,"parentId":"1a3q9z3wyr","labelAlignment":"left","renderMode":"CANVAS","isLoading":false,"mobileTopRow":10.0,"responsiveBehavior":"fill","borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":38.0,"maxDynamicHeight":9000.0,"iconAlign":"left","defaultText":"","minDynamicHeight":4.0}],"key":"znb80n7jk7","rightColumn":486.0,"detachFromLayout":true,"dynamicHeight":"AUTO_HEIGHT","widgetId":"1a3q9z3wyr","containerStyle":"none","minWidth":450.0,"isVisible":true,"version":1.0,"parentId":"7l23u2pwrm","renderMode":"CANVAS","isLoading":false,"mobileTopRow":0.0,"responsiveBehavior":"fill","borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":0.0,"maxDynamicHeight":9000.0,"minDynamicHeight":4.0,"flexLayers":[]}],"borderWidth":"1","positioning":"fixed","flexVerticalAlignment":"stretch","key":"9kc7fn92qh","backgroundColor":"#FFFFFF","rightColumn":48.0,"dynamicHeight":"AUTO_HEIGHT","widgetId":"7l23u2pwrm","minWidth":450.0,"isVisible":true,"parentId":"0","renderMode":"CANVAS","isLoading":false,"mobileTopRow":45.0,"responsiveBehavior":"fill","originalTopRow":41.0,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","mobileLeftColumn":27.0,"maxDynamicHeight":9000.0,"originalBottomRow":81.0,"minDynamicHeight":10.0},{"boxShadow":"{{appsmith.theme.boxShadow.appBoxShadow}}","borderColor":"#E0DEDE","isVisibleDownload":true,"topRow":12.0,"isSortable":true,"type":"TABLE_WIDGET_V2","inlineEditingSaveOption":"ROW_LEVEL","animateLoading":true,"dynamicBindingPathList":[{"key":"accentColor"},{"key":"borderRadius"},{"key":"boxShadow"},{"key":"tableData"},{"key":"primaryColumns.codigo.computedValue"},{"key":"primaryColumns.data.computedValue"},{"key":"primaryColumns.produto.computedValue"},{"key":"primaryColumns.quantidade.computedValue"},{"key":"primaryColumns.total.computedValue"}],"leftColumn":32.0,"delimiter":",","customIsLoadingValue":"","defaultSelectedRowIndex":0.0,"flexVerticalAlignment":"start","accentColor":"{{appsmith.theme.colors.primaryColor}}","isVisibleFilters":false,"isVisible":true,"enableClientSideSearch":true,"version":2.0,"totalRecordsCount":0.0,"isLoading":false,"childStylesheet":{"button":{"buttonColor":"{{appsmith.theme.colors.primaryColor}}","borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","boxShadow":"none"},"menuButton":{"menuColor":"{{appsmith.theme.colors.primaryColor}}","borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","boxShadow":"none"},"iconButton":{"buttonColor":"{{appsmith.theme.colors.primaryColor}}","borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","boxShadow":"none"},"editActions":{"saveButtonColor":"{{appsmith.theme.colors.primaryColor}}","saveBorderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","discardButtonColor":"{{appsmith.theme.colors.primaryColor}}","discardBorderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}"}},"customIsLoading":false,"borderRadius":"{{appsmith.theme.borderRadius.appBorderRadius}}","columnUpdatedAt":1.739920694156E12,"defaultSelectedRowIndices":[0.0],"needsErrorInfo":false,"mobileBottomRow":40.0,"widgetName":"TableVendas","defaultPageSize":0.0,"columnOrder":["codigo","data","produto","quantidade","total"],"dynamicPropertyPathList":[{"key":"tableData"}],"bottomRow":40.0,"columnWidthMap":{"produto":94.0},"parentRowSpace":10.0,"mobileRightColumn":64.0,"parentColumnSpace":20.25,"dynamicTriggerPathList":[],"borderWidth":"1","primaryColumns":{"codigo":{"allowCellWrapping":false,"allowSameOptionsInNewRow":true,"index":0.0,"width":150.0,"originalId":"codigo","id":"codigo","alias":"codigo","horizontalAlignment":"LEFT","verticalAlignment":"CENTER","columnType":"number","textColor":"","textSize":"0.875rem","fontStyle":"","enableFilter":true,"enableSort":true,"isVisible":true,"isDisabled":false,"isCellEditable":false,"isEditable":false,"isCellVisible":true,"isDerived":false,"label":"codigo","isSaveVisible":true,"isDiscardVisible":true,"computedValue":"{{TableVendas.processedTableData.map((currentRow, currentIndex) => ( currentRow[\"codigo\"]))}}","sticky":"","validation":{},"currencyCode":"USD","decimals":0.0,"thousandSeparator":true,"notation":"standard","cellBackground":""},"data":{"allowCellWrapping":false,"allowSameOptionsInNewRow":true,"index":1.0,"width":150.0,"originalId":"data","id":"data","alias":"data","horizontalAlignment":"LEFT","verticalAlignment":"CENTER","columnType":"text","textColor":"","textSize":"0.875rem","fontStyle":"","enableFilter":true,"enableSort":true,"isVisible":true,"isDisabled":false,"isCellEditable":false,"isEditable":false,"isCellVisible":true,"isDerived":false,"label":"data","isSaveVisible":true,"isDiscardVisible":true,"computedValue":"{{TableVendas.processedTableData.map((currentRow, currentIndex) => ( currentRow[\"data\"]))}}","sticky":"","validation":{},"currencyCode":"USD","decimals":0.0,"thousandSeparator":true,"notation":"standard","cellBackground":""},"produto":{"allowCellWrapping":false,"allowSameOptionsInNewRow":true,"index":2.0,"width":150.0,"originalId":"produto","id":"produto","alias":"produto","horizontalAlignment":"LEFT","verticalAlignment":"CENTER","columnType":"text","textColor":"","textSize":"0.875rem","fontStyle":"","enableFilter":true,"enableSort":true,"isVisible":true,"isDisabled":false,"isCellEditable":false,"isEditable":false,"isCellVisible":true,"isDerived":false,"label":"produto","isSaveVisible":true,"isDiscardVisible":true,"computedValue":"{{TableVendas.processedTableData.map((currentRow, currentIndex) => ( currentRow[\"produto\"]))}}","sticky":"","validation":{},"currencyCode":"USD","decimals":0.0,"thousandSeparator":true,"notation":"standard","cellBackground":""},"quantidade":{"allowCellWrapping":false,"allowSameOptionsInNewRow":true,"index":3.0,"width":150.0,"originalId":"quantidade","id":"quantidade","alias":"quantidade","horizontalAlignment":"LEFT","verticalAlignment":"CENTER","columnType":"number","textColor":"","textSize":"0.875rem","fontStyle":"","enableFilter":true,"enableSort":true,"isVisible":true,"isDisabled":false,"isCellEditable":false,"isEditable":false,"isCellVisible":true,"isDerived":false,"label":"quantidade","isSaveVisible":true,"isDiscardVisible":true,"computedValue":"{{TableVendas.processedTableData.map((currentRow, currentIndex) => ( currentRow[\"quantidade\"]))}}","sticky":"","validation":{},"currencyCode":"USD","decimals":0.0,"thousandSeparator":true,"notation":"standard","cellBackground":""},"total":{"allowCellWrapping":false,"allowSameOptionsInNewRow":true,"index":4.0,"width":150.0,"originalId":"total","id":"total","alias":"total","horizontalAlignment":"LEFT","verticalAlignment":"CENTER","columnType":"number","textColor":"","textSize":"0.875rem","fontStyle":"","enableFilter":true,"enableSort":true,"isVisible":true,"isDisabled":false,"isCellEditable":false,"isEditable":false,"isCellVisible":true,"isDerived":false,"label":"total","isSaveVisible":true,"isDiscardVisible":true,"computedValue":"{{TableVendas.processedTableData.map((currentRow, currentIndex) => ( currentRow[\"total\"]))}}","sticky":"","validation":{},"currencyCode":"USD","decimals":0.0,"thousandSeparator":true,"notation":"standard","cellBackground":""}},"key":"z2pkndbppg","canFreezeColumn":true,"rightColumn":64.0,"textSize":"0.875rem","widgetId":"a9j5n9kdg4","minWidth":450.0,"tableData":"{{listar_vendas.data}}","label":"Data","searchKey":"","parentId":"0","renderMode":"CANVAS","mobileTopRow":12.0,"horizontalAlignment":"LEFT","isVisibleSearch":true,"responsiveBehavior":"fill","mobileLeftColumn":30.0,"isVisiblePagination":true,"verticalAlignment":"CENTER"}]},"layoutOnLoadActions":[[{"id":"Page1_listar_todos_fornecedores","name":"listar_todos_fornecedores","confirmBeforeExecute":false,"pluginType":"DB","jsonPathKeys":[],"timeoutInMillisecond":10000.0}],[{"id":"Page1_listar_vendas","name":"listar_vendas","confirmBeforeExecute":false,"pluginType":"DB","jsonPathKeys":[],"timeoutInMillisecond":10000.0}],[{"id":"Page1_listar_fornecedores","name":"listar_fornecedores","confirmBeforeExecute":false,"pluginType":"DB","jsonPathKeys":[],"timeoutInMillisecond":10000.0}],[{"id":"Page1_listar_produtos_paginado","name":"listar_produtos_paginado","confirmBeforeExecute":false,"pluginType":"DB","jsonPathKeys":[" TabelaProdutos.sortOrder?.order === \"desc\" ? \"DESC\" : \"ASC\" "," TabelaProdutos.pageSize && TabelaProdutos.pageSize > 0 ? TabelaProdutos.pageSize : 10 "," TabelaProdutos.pageOffset && TabelaProdutos.pageOffset >= 0 ? TabelaProdutos.pageOffset : 0 "," TabelaProdutos.searchText || \"\" "," TabelaProdutos.sortOrder?.column && TabelaProdutos.sortOrder?.column !== \"\" ? TabelaProdutos.sortOrder.column : \"codigo\" "],"timeoutInMillisecond":10000.0}],[{"id":"Page1_contar_produtos","name":"contar_produtos","confirmBeforeExecute":false,"pluginType":"DB","jsonPathKeys":["TabelaProdutos.searchText"],"timeoutInMillisecond":10000.0}]],"layoutOnLoadActionErrors":[],"validOnPageLoadActions":true,"id":"Page1","deleted":false,"policies":[],"userPermissions":[]}],"userPermissions":[],"policyMap":{}},"publishedPage":{"name":"Page1","slug":"page1","layouts":[{"viewMode":false,"dsl":{"widgetName":"MainContainer","backgroundColor":"none","rightColumn":4896.0,"snapColumns":64.0,"detachFromLayout":true,"widgetId":"0","topRow":0.0,"bottomRow":5000.0,"containerStyle":"none","snapRows":124.0,"parentRowSpace":1.0,"type":"CANVAS_WIDGET","canExtend":true,"version":91.0,"minHeight":1292.0,"dynamicTriggerPathList":[],"parentColumnSpace":1.0,"dynamicBindingPathList":[],"leftColumn":0.0,"children":[]},"validOnPageLoadActions":true,"id":"Page1","deleted":false,"policies":[],"userPermissions":[]}],"userPermissions":[],"policyMap":{}},"gitSyncId":"67ad5b3c8d6ae073e8b07215_b4b712ee-8b8a-4a07-addd-f34bb0aad40f","deleted":false}],"actionList":[{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"listar_produtos_paginado","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"SELECT \n    p.codigo, \n    p.descricao, \n    p.valor, \n    p.quantidade, \n    f.descricao AS fornecedor_nome  -- \uD83D\uDD39 Agora pegamos apenas o nome do fornecedor\nFROM public.produto p\nLEFT JOIN public.fornecedor f ON p.fornecedor_codigo = f.codigo\nWHERE p.descricao ILIKE '%{{ TabelaProdutos.searchText || \"\" }}%'\nORDER BY \n  {{ TabelaProdutos.sortOrder?.column && TabelaProdutos.sortOrder?.column !== \"\" ? TabelaProdutos.sortOrder.column : \"codigo\" }} \n  {{ TabelaProdutos.sortOrder?.order === \"desc\" ? \"DESC\" : \"ASC\" }}\nLIMIT {{ TabelaProdutos.pageSize && TabelaProdutos.pageSize > 0 ? TabelaProdutos.pageSize : 10 }}\nOFFSET {{ TabelaProdutos.pageOffset && TabelaProdutos.pageOffset >= 0 ? TabelaProdutos.pageOffset : 0 }};","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":false}]},"executeOnLoad":true,"dynamicBindingPathList":[{"key":"body"}],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":[" TabelaProdutos.sortOrder?.order === \"desc\" ? \"DESC\" : \"ASC\" "," TabelaProdutos.pageSize && TabelaProdutos.pageSize > 0 ? TabelaProdutos.pageSize : 10 "," TabelaProdutos.pageOffset && TabelaProdutos.pageOffset >= 0 ? TabelaProdutos.pageOffset : 0 "," TabelaProdutos.searchText || \"\" "," TabelaProdutos.sortOrder?.column && TabelaProdutos.sortOrder?.column !== \"\" ? TabelaProdutos.sortOrder.column : \"codigo\" "],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T03:58:00Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T03:58:00Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_606e0bc2-34a9-48c5-80d8-e3f13124f11b","id":"Page1_listar_produtos_paginado","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"contar_produtos","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"SELECT COUNT(*) FROM public.produto WHERE descricao ILIKE '%{{TabelaProdutos.searchText}}%';","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":false}]},"executeOnLoad":true,"dynamicBindingPathList":[{"key":"body"}],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":["TabelaProdutos.searchText"],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T03:58:00Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T03:58:00Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_531260fa-d982-4323-bec0-e9ad080b6b9d","id":"Page1_contar_produtos","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"atualizar_produto","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"UPDATE produto \nSET descricao = COALESCE(NULLIF('{{InputProdutoDescricao.text}}', ''), descricao), \n    valor = COALESCE({{InputProdutoValor.text}}, valor), \n    quantidade = COALESCE({{InputProdutoQuantidade.text}}, quantidade), \n    fornecedor_codigo = COALESCE({{SelectProdutoFornecedor.selectedOptionValue}}, fornecedor_codigo) \nWHERE codigo = {{TabelaProdutos.selectedRow.codigo}};\n","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":false}]},"executeOnLoad":false,"dynamicBindingPathList":[{"key":"body"}],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":["TabelaProdutos.selectedRow.codigo","SelectProdutoFornecedor.selectedOptionValue","InputProdutoValor.text","InputProdutoQuantidade.text","InputProdutoDescricao.text"],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T03:58:02Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T03:58:02Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_03741f2a-ff9b-4e5c-8da0-47fc6695f678","id":"Page1_atualizar_produto","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"inserir_produto","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"INSERT INTO produto (descricao, valor, quantidade, fornecedor_codigo) \nVALUES (\n  COALESCE(NULLIF('{{this.params.descricao}}', ''), 'Produto Padrão'), \n  COALESCE(NULLIF({{this.params.valor}}, 0)::numeric, 0), \n  COALESCE(NULLIF({{this.params.quantidade}}, 1)::integer, 1), \n  COALESCE(NULLIF({{this.params.fornecedor_codigo}}, 1)::integer, 1)\n);\n","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":false}]},"executeOnLoad":false,"dynamicBindingPathList":[{"key":"body"}],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":["this.params.descricao","this.params.fornecedor_codigo","this.params.quantidade","this.params.valor"],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T03:58:02Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T03:58:02Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_723c3d8b-b7db-4d13-bcf2-6651bf30fe6a","id":"Page1_inserir_produto","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"listar_produtos","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"SELECT codigo, descricao, valor, quantidade FROM produto;","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":true}]},"executeOnLoad":false,"dynamicBindingPathList":[],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T04:03:05Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T04:03:05Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_0316ddd3-1d10-4a33-a817-aabdc02a66c2","id":"Page1_listar_produtos","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"listar_produtos_resumido","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"SELECT codigo, descricao, valor, quantidade FROM produto ORDER BY descricao;\n","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":true}]},"executeOnLoad":false,"dynamicBindingPathList":[],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T18:42:19Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T18:42:19Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_88440c9e-36bf-4cdf-887a-dafa1b7ac433","id":"Page1_listar_produtos_resumido","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"buscar_produtos_filtro","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"SELECT * FROM produto WHERE descricao ILIKE '%' || COALESCE({{TabelaProdutos.searchText.text}}, '') || '%';\n","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":true}]},"executeOnLoad":false,"dynamicBindingPathList":[{"key":"body"}],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":["TabelaProdutos.searchText.text"],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T18:43:07Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T18:43:07Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_4b2f729b-c990-4f22-8e05-aa7818181844","id":"Page1_buscar_produtos_filtro","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"listar_fornecedores","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"SELECT DISTINCT codigo, descricao FROM fornecedor;\n","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":true}]},"executeOnLoad":true,"dynamicBindingPathList":[],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T19:05:32Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T19:05:32Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_e651fc96-fb26-4d3f-8519-23c526e4e708","id":"Page1_listar_fornecedores","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"inserir_fornecedor","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"INSERT INTO fornecedor (descricao) VALUES ('Fornecedor Padrão');\n","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":true}]},"executeOnLoad":false,"dynamicBindingPathList":[],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T19:11:00Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T19:11:00Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_026d8be7-6d06-4f7a-b881-307abe99c355","id":"Page1_inserir_fornecedor","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"listar_todos_fornecedores","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"SELECT * FROM fornecedor;","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":true}]},"executeOnLoad":true,"dynamicBindingPathList":[],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":[],"userSetOnLoad":true,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T19:12:09Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-13T19:12:09Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_30923c1b-0d2f-4c56-906f-b48c4543c8ed","id":"Page1_listar_todos_fornecedores","deleted":false},{"pluginType":"JS","pluginId":"js-plugin","unpublishedAction":{"name":"descartarAlteracoes","fullyQualifiedName":"ProdutoService.descartarAlteracoes","datasource":{"name":"UNUSED_DATASOURCE","pluginId":"js-plugin","messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","collectionId":"Page1_ProdutoService","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"async () => {\n  try {\n    showAlert(\"Alterações descartadas!\", \"warning\");\n    await listar_produtos_paginado.run();\n    FormProduto.setVisibility(true);\n  } catch (error) {\n    console.error(\"Erro ao descartar alterações:\", error);\n    showAlert(\"Erro ao descartar alterações!\", \"error\");\n  }\n}","selfReferencingDataPaths":[],"jsArguments":[]},"executeOnLoad":false,"dynamicBindingPathList":[{"key":"body"}],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":["async () => {\n  try {\n    showAlert(\"Alterações descartadas!\", \"warning\");\n    await listar_produtos_paginado.run();\n    FormProduto.setVisibility(true);\n  } catch (error) {\n    console.error(\"Erro ao descartar alterações:\", error);\n    showAlert(\"Erro ao descartar alterações!\", \"error\");\n  }\n}"],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-17T19:41:03Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-17T19:41:03Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_eb4c7996-e0d8-4766-aae2-af4990f272db","id":"Page1_ProdutoService.descartarAlteracoes","deleted":false},{"pluginType":"JS","pluginId":"js-plugin","unpublishedAction":{"name":"salvarEdicaoProduto","fullyQualifiedName":"AtualizarProduto.salvarEdicaoProduto","datasource":{"name":"UNUSED_DATASOURCE","pluginId":"js-plugin","messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","collectionId":"Page1_AtualizarProduto","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"async () => {\n  try {\n    await atualizar_produto.run();\n    showAlert(\"Produto atualizado com sucesso!\", \"success\");\n    await listar_produtos_paginado.run();\n  } catch (error) {\n    console.error(\"Erro ao atualizar produto:\", error);\n    showAlert(\"Erro ao atualizar produto!\", \"error\");\n  }\n}","selfReferencingDataPaths":[],"jsArguments":[]},"executeOnLoad":false,"dynamicBindingPathList":[{"key":"body"}],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":["async () => {\n  try {\n    await atualizar_produto.run();\n    showAlert(\"Produto atualizado com sucesso!\", \"success\");\n    await listar_produtos_paginado.run();\n  } catch (error) {\n    console.error(\"Erro ao atualizar produto:\", error);\n    showAlert(\"Erro ao atualizar produto!\", \"error\");\n  }\n}"],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-17T19:54:03Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-17T19:54:03Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_6b83dc88-3259-4ad1-9fcb-7adbe9cb1bce","id":"Page1_AtualizarProduto.salvarEdicaoProduto","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"deletar_produto","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"DELETE FROM public.produto WHERE codigo = {{ this.params.codigo }};\n\n","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":true}]},"executeOnLoad":false,"dynamicBindingPathList":[{"key":"body"}],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":[" this.params.codigo "],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T06:24:55Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T06:24:55Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_d4bcfdef-2dd8-477a-85cf-cf352a458aaf","id":"Page1_deletar_produto","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"registrar_venda","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"INSERT INTO public.vendas (produto_codigo, quantidade, total)\nVALUES (\n    {{ this.params.produto_codigo }},\n    {{ this.params.quantidade }},\n    (SELECT valor * {{ this.params.quantidade }} FROM public.produto WHERE codigo = {{ this.params.produto_codigo }})\n);\n","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":false}]},"executeOnLoad":false,"dynamicBindingPathList":[{"key":"body"}],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":[" this.params.quantidade "," this.params.produto_codigo "],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T06:31:45Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T06:31:45Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_7158efa9-7233-4cfe-9a35-51fc969e533c","id":"Page1_registrar_venda","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"atualizar_estoque","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"UPDATE public.produto\nSET quantidade = quantidade - {{ this.params.quantidade }}\nWHERE codigo = {{ this.params.produto_codigo }};\n","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":true}]},"executeOnLoad":false,"dynamicBindingPathList":[{"key":"body"}],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":[" this.params.quantidade "," this.params.produto_codigo "],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T06:39:26Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T06:39:26Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_34b4da92-e6ad-4954-b031-9594abeee7d2","id":"Page1_atualizar_estoque","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"vendas","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"CREATE TABLE public.vendas (\n    codigo SERIAL PRIMARY KEY,\n    data TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    produto_codigo INT REFERENCES public.produto(codigo) ON DELETE CASCADE,\n    quantidade INT NOT NULL CHECK (quantidade > 0),\n    total NUMERIC(10,2) NOT NULL CHECK (total >= 0)\n);\n","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":true}]},"executeOnLoad":false,"dynamicBindingPathList":[],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T06:43:06Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T06:43:06Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_8a457ff3-c1dc-4a7f-8e5c-d54ef3e68337","id":"Page1_vendas","deleted":false},{"pluginType":"DB","pluginId":"postgres-plugin","unpublishedAction":{"name":"listar_vendas","datasource":{"name":"banco_dados","pluginId":"postgres-plugin","messages":[],"isAutoGenerated":false,"id":"banco_dados","deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","actionConfiguration":{"timeoutInMillisecond":10000.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"SELECT v.codigo, v.data, p.descricao AS produto, v.quantidade, v.total\nFROM public.vendas v\nJOIN public.produto p ON v.produto_codigo = p.codigo\nORDER BY v.data DESC;\n","selfReferencingDataPaths":[],"pluginSpecifiedTemplates":[{"value":true}]},"executeOnLoad":true,"dynamicBindingPathList":[],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T06:45:10Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T06:45:10Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_2390f6df-4ebc-49f0-bcea-2f6dcae76e92","id":"Page1_listar_vendas","deleted":false},{"pluginType":"JS","pluginId":"js-plugin","unpublishedAction":{"name":"salvarProduto","fullyQualifiedName":"validarESalvarProduto.salvarProduto","datasource":{"name":"UNUSED_DATASOURCE","pluginId":"js-plugin","messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","collectionId":"Page1_validarESalvarProduto","actionConfiguration":{"timeoutInMillisecond":0.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"async () => {\n  if (!InputProdutoDescricao.text || !InputProdutoValor.text || !InputProdutoQuantidade.text || !SelectProdutoFornecedor.selectedOptionValue) {\n    showAlert(\"Preencha todos os campos!\", \"error\");\n    return;\n  }\n  try {\n    console.log(\"\uD83D\uDFE2 Tentando salvar produto...\");\n    console.log(\"\uD83D\uDCCB Descrição:\", InputProdutoDescricao.text);\n    console.log(\"\uD83D\uDCB0 Valor:\", InputProdutoValor.text);\n    console.log(\"\uD83D\uDCE6 Quantidade:\", InputProdutoQuantidade.text);\n    console.log(\"\uD83C\uDFED Fornecedor:\", SelectProdutoFornecedor.selectedOptionValue);\n    let mensagem = \"\";\n    const isEditing = appsmith.store.selectedRow?.codigo !== undefined;\n    if (isEditing) {\n      console.log(\"✏️ Atualizando produto existente...\");\n      await atualizar_produto.run({\n        codigo: appsmith.store.selectedRow.codigo,\n        descricao: InputProdutoDescricao.text,\n        valor: parseFloat(InputProdutoValor.text),\n        quantidade: parseInt(InputProdutoQuantidade.text, 10),\n        fornecedor_codigo: parseInt(SelectProdutoFornecedor.selectedOptionValue, 10)\n      });\n      mensagem = \"Produto atualizado com sucesso!\";\n    } else {\n      console.log(\"\uD83C\uDD95 Criando novo produto...\");\n      await inserir_produto.run({\n        descricao: InputProdutoDescricao.text,\n        valor: parseFloat(InputProdutoValor.text),\n        quantidade: parseInt(InputProdutoQuantidade.text, 10),\n        fornecedor_codigo: parseInt(SelectProdutoFornecedor.selectedOptionValue, 10)\n      });\n      mensagem = \"Produto inserido com sucesso!\";\n    }\n    showAlert(mensagem, \"success\");\n    await listar_produtos_paginado.run();\n    console.log(\"✅ `TabelaProdutos` atualizado!\");\n    FormProduto.setVisibility(true);\n    storeValue(\"selectedRow\", null);\n  } catch (error) {\n    console.error(\"❌ Erro ao salvar produto:\", error);\n    showAlert(\"Erro ao salvar produto!\", \"error\");\n  }\n}","selfReferencingDataPaths":[],"jsArguments":[]},"executeOnLoad":false,"dynamicBindingPathList":[{"key":"body"}],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":["async () => {\n  if (!InputProdutoDescricao.text || !InputProdutoValor.text || !InputProdutoQuantidade.text || !SelectProdutoFornecedor.selectedOptionValue) {\n    showAlert(\"Preencha todos os campos!\", \"error\");\n    return;\n  }\n  try {\n    console.log(\"\uD83D\uDFE2 Tentando salvar produto...\");\n    console.log(\"\uD83D\uDCCB Descrição:\", InputProdutoDescricao.text);\n    console.log(\"\uD83D\uDCB0 Valor:\", InputProdutoValor.text);\n    console.log(\"\uD83D\uDCE6 Quantidade:\", InputProdutoQuantidade.text);\n    console.log(\"\uD83C\uDFED Fornecedor:\", SelectProdutoFornecedor.selectedOptionValue);\n    let mensagem = \"\";\n    const isEditing = appsmith.store.selectedRow?.codigo !== undefined;\n    if (isEditing) {\n      console.log(\"✏️ Atualizando produto existente...\");\n      await atualizar_produto.run({\n        codigo: appsmith.store.selectedRow.codigo,\n        descricao: InputProdutoDescricao.text,\n        valor: parseFloat(InputProdutoValor.text),\n        quantidade: parseInt(InputProdutoQuantidade.text, 10),\n        fornecedor_codigo: parseInt(SelectProdutoFornecedor.selectedOptionValue, 10)\n      });\n      mensagem = \"Produto atualizado com sucesso!\";\n    } else {\n      console.log(\"\uD83C\uDD95 Criando novo produto...\");\n      await inserir_produto.run({\n        descricao: InputProdutoDescricao.text,\n        valor: parseFloat(InputProdutoValor.text),\n        quantidade: parseInt(InputProdutoQuantidade.text, 10),\n        fornecedor_codigo: parseInt(SelectProdutoFornecedor.selectedOptionValue, 10)\n      });\n      mensagem = \"Produto inserido com sucesso!\";\n    }\n    showAlert(mensagem, \"success\");\n    await listar_produtos_paginado.run();\n    console.log(\"✅ `TabelaProdutos` atualizado!\");\n    FormProduto.setVisibility(true);\n    storeValue(\"selectedRow\", null);\n  } catch (error) {\n    console.error(\"❌ Erro ao salvar produto:\", error);\n    showAlert(\"Erro ao salvar produto!\", \"error\");\n  }\n}"],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T22:50:59Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T22:50:59Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_f912d890-6272-4c8f-b48b-0151df4eabd4","id":"Page1_validarESalvarProduto.salvarProduto","deleted":false},{"pluginType":"JS","pluginId":"js-plugin","unpublishedAction":{"name":"adicionarNovoProduto","fullyQualifiedName":"validarESalvarProduto.adicionarNovoProduto","datasource":{"name":"UNUSED_DATASOURCE","pluginId":"js-plugin","messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"pageId":"Page1","collectionId":"Page1_validarESalvarProduto","actionConfiguration":{"timeoutInMillisecond":0.0,"paginationType":"NONE","encodeParamsToggle":true,"body":"() => {\n  console.log(\"\uD83C\uDD95 Abrindo formulário para adicionar um novo produto...\");\n  storeValue(\"selectedRow\", null);\n  console.log(\"selectedRow resetado:\", appsmith.store.selectedRow);\n  FormProduto.setVisibility(true);\n  InputProdutoDescricao.setValue(\"\");\n  InputProdutoValor.setValue(\"\");\n  InputProdutoQuantidade.setValue(\"\");\n  SelectProdutoFornecedor.setSelectedOption(\"\");\n}","selfReferencingDataPaths":[],"jsArguments":[]},"executeOnLoad":false,"dynamicBindingPathList":[{"key":"body"}],"isValid":true,"invalids":[],"messages":[],"jsonPathKeys":["() => {\n  console.log(\"\uD83C\uDD95 Abrindo formulário para adicionar um novo produto...\");\n  storeValue(\"selectedRow\", null);\n  console.log(\"selectedRow resetado:\", appsmith.store.selectedRow);\n  FormProduto.setVisibility(true);\n  InputProdutoDescricao.setValue(\"\");\n  InputProdutoValor.setValue(\"\");\n  InputProdutoQuantidade.setValue(\"\");\n  SelectProdutoFornecedor.setSelectedOption(\"\");\n}"],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T22:50:59Z"},"publishedAction":{"datasource":{"messages":[],"isAutoGenerated":false,"deleted":false,"policyMap":{},"policies":[],"userPermissions":[]},"messages":[],"userSetOnLoad":false,"confirmBeforeExecute":false,"policyMap":{},"userPermissions":[],"createdAt":"2025-02-18T22:50:59Z"},"gitSyncId":"67ad5b3c8d6ae073e8b07215_9de208c9-6585-4e7f-ad1e-437793e6992f","id":"Page1_validarESalvarProduto.adicionarNovoProduto","deleted":false}],"actionCollectionList":[{"unpublishedCollection":{"name":"validarESalvarProduto","pageId":"Page1","pluginId":"js-plugin","pluginType":"JS","actions":[],"archivedActions":[],"body":"export default {\n    salvarProduto: async () => {\n        // Verifica se os campos obrigatórios estão preenchidos\n        if (!InputProdutoDescricao.text || !InputProdutoValor.text || !InputProdutoQuantidade.text || !SelectProdutoFornecedor.selectedOptionValue) {\n            showAlert(\"Preencha todos os campos!\", \"error\");\n            return;\n        }\n\n        try {\n            console.log(\"\uD83D\uDFE2 Tentando salvar produto...\");\n            console.log(\"\uD83D\uDCCB Descrição:\", InputProdutoDescricao.text);\n            console.log(\"\uD83D\uDCB0 Valor:\", InputProdutoValor.text);\n            console.log(\"\uD83D\uDCE6 Quantidade:\", InputProdutoQuantidade.text);\n            console.log(\"\uD83C\uDFED Fornecedor:\", SelectProdutoFornecedor.selectedOptionValue);\n\n            let mensagem = \"\";\n\n            // \uD83D\uDD04 Verifica se está editando um produto ou criando um novo\n            const isEditing = appsmith.store.selectedRow?.codigo !== undefined;\n\n            if (isEditing) {\n                console.log(\"✏️ Atualizando produto existente...\");\n                await atualizar_produto.run({\n                    codigo: appsmith.store.selectedRow.codigo,\n                    descricao: InputProdutoDescricao.text,\n                    valor: parseFloat(InputProdutoValor.text),\n                    quantidade: parseInt(InputProdutoQuantidade.text, 10),\n                    fornecedor_codigo: parseInt(SelectProdutoFornecedor.selectedOptionValue, 10)\n                });\n                mensagem = \"Produto atualizado com sucesso!\";\n            } else {\n                console.log(\"\uD83C\uDD95 Criando novo produto...\");\n                await inserir_produto.run({\n                    descricao: InputProdutoDescricao.text,\n                    valor: parseFloat(InputProdutoValor.text),\n                    quantidade: parseInt(InputProdutoQuantidade.text, 10),\n                    fornecedor_codigo: parseInt(SelectProdutoFornecedor.selectedOptionValue, 10)\n                });\n                mensagem = \"Produto inserido com sucesso!\";\n            }\n\n            showAlert(mensagem, \"success\");\n\n            // \uD83D\uDD04 Atualiza a tabela para refletir a alteração\n            await listar_produtos_paginado.run();\n            console.log(\"✅ `TabelaProdutos` atualizado!\");\n\n            // Mantém o formulário visível após salvar\n            FormProduto.setVisibility(true);\n\n            // \uD83D\uDD04 Reseta o selectedRow após salvar para garantir que novos produtos sejam criados corretamente\n            storeValue(\"selectedRow\", null);\n\n        } catch (error) {\n            console.error(\"❌ Erro ao salvar produto:\", error);\n            showAlert(\"Erro ao salvar produto!\", \"error\");\n        }\n    },\n\n    adicionarNovoProduto: () => {\n        console.log(\"\uD83C\uDD95 Abrindo formulário para adicionar um novo produto...\");\n\n        // \uD83D\uDD04 Resetando `selectedRow` corretamente para garantir que o formulário abra vazio\n        storeValue(\"selectedRow\", null);\n        console.log(\"selectedRow resetado:\", appsmith.store.selectedRow);\n\n        // Abre o formulário e reseta os campos\n        FormProduto.setVisibility(true);\n        InputProdutoDescricao.setValue(\"\"); \n        InputProdutoValor.setValue(\"\");\n        InputProdutoQuantidade.setValue(\"\");\n        SelectProdutoFornecedor.setSelectedOption(\"\");\n    }\n};\n","variables":[],"userPermissions":[]},"gitSyncId":"67ad5b3c8d6ae073e8b07215_eb9b405c-0237-4a35-a42d-baa852164de0","id":"Page1_validarESalvarProduto","deleted":false},{"unpublishedCollection":{"name":"ProdutoService","pageId":"Page1","pluginId":"js-plugin","pluginType":"JS","actions":[],"archivedActions":[],"body":"export default {\n\tdescartarAlteracoes: async () => {\n\t\ttry {\n\t\t\tshowAlert(\"Alterações descartadas!\", \"warning\");\n\t\t\tawait listar_produtos_paginado.run();\n\t\t\tFormProduto.setVisibility(true); // Esconde o formulário após descartar\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Erro ao descartar alterações:\", error);\n\t\t\tshowAlert(\"Erro ao descartar alterações!\", \"error\");\n\t\t}\n\t}\n}\n","variables":[],"userPermissions":[]},"gitSyncId":"67ad5b3c8d6ae073e8b07215_e7379911-c13e-4c2b-b504-8b80855e6dca","id":"Page1_ProdutoService","deleted":false},{"unpublishedCollection":{"name":"AtualizarProduto","pageId":"Page1","pluginId":"js-plugin","pluginType":"JS","actions":[],"archivedActions":[],"body":"export default {\n    salvarEdicaoProduto: async () => {\n        try {\n            await atualizar_produto.run(); // Atualiza no banco\n            showAlert(\"Produto atualizado com sucesso!\", \"success\");\n            await listar_produtos_paginado.run(); // Atualiza a tabela na interface\n        } catch (error) {\n            console.error(\"Erro ao atualizar produto:\", error);\n            showAlert(\"Erro ao atualizar produto!\", \"error\");\n        }\n    }\n};\n","variables":[],"userPermissions":[]},"gitSyncId":"67ad5b3c8d6ae073e8b07215_3eaa9362-89af-445e-a0e2-a01f018be0a5","id":"Page1_AtualizarProduto","deleted":false}],"editModeTheme":{"name":"Default-New","displayName":"Modern","isSystemTheme":true,"deleted":false},"publishedTheme":{"name":"Default-New","displayName":"Modern","isSystemTheme":true,"deleted":false}}